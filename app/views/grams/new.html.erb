<div class="col-10 offset-1 col-sm-8 offset-sm-2 col-md-6 offset-md-3 card form">
  <h1>Post a new Gram</h1>

  <div class="upload-preview">
    <img class="img-fluid mx-auto d-block" />
  </div>
  <br />
  <%= simple_form_for @gram do |f| %>
    <%= f.input :picture, label: false %>
    <%= f.input :message, label: "Caption:" %>
    <%= f.submit "Post!", url: grams_path, class: 'btn btn-primary btn-post' %>
  <% end %>
</div>

<script>
  $(document).ready(function(){
    var preview = $(".upload-preview img");

    $(".file").change(function(event){
       var input = $(event.currentTarget);
       var file = input[0].files[0];
       var reader = new FileReader();
       reader.onload = function(e){
           image_base64 = e.target.result;
           preview.attr("src", image_base64);
       };
       reader.readAsDataURL(file);
    });
  });
</script>